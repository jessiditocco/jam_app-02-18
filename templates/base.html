<!doctype html>
<html>
<head>
    <title>{% block title %}TITLE GOES HERE{% endblock %}</title>

    <!--Include CSS in the head for bootstrap before CSS of my own-->
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

    <!--Include my own CSS in the head-->
    <link rel="stylesheet" href="/static/style.css">

    <!--Include jquery CDN in the head-->
    <script
        src="http://code.jquery.com/jquery-3.3.1.min.js"
        integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
        crossorigin="anonymous">
    </script>

</head>
<body>


<!--Navbar-->

    <a href="/">Home</a><br>
 <!--    <a href="/register">Register User</a><br> -->
  {% if "user_id" in session %}
  <a href="/profile">Your Profile</a><div>
  {% endif %}

<!--     {% if "user_id" not in session %}
    <a href="/login">Login</a><div>

    {% else %}
    <a href="/profile">Your Profile</a><div>
    <a href="/logout">Logout</a><div>
    {% endif %} -->

    <ul>
        {% for message in get_flashed_messages() %}
            <li>{{ message }}</li>
        {% endfor %}
    </ul>       

<!--Button For Registration-->


<!--Modal button For Registration-->

<button type="button" class="btn btn-primary btn-lg" data-toggle="modal" data-target="#registration_modal">
  Register User
</button>

<!-- Modal Window for Registration-->
<div class="modal fade" id="registration_modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="myModalLabel">Register New User</h4>
      </div>
      <div class="modal-body">
        <div id="user_in_db"></div>
        <form id="registration_form" action="/register" method="POST">
        Name: 
            <input type="text" name="name" id="registration_name"><br>
        Email: 
            <input type="email" name="email" id="registration_email"><br>
        Password: 
            <input type="password" name="password" id="registration_password"><br>
       <!--  <input type="submit"> -->
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" id="close_registration_modal" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary" id="register_user_button">Register User</button>
      </div>
    </div>
  </div>
</div>


<!-- Modal Button For Login -->
<!-- If the user is in the session, the login button should be hidden -->


<button id="login_button" type="button" class="btn btn-primary btn-lg" data-toggle="modal" data-target="#login_modal" {% if 'user_id' in session%} style="display:none" {% endif %}>
  Login
</button>


<!-- Modal Window For Login -->

<div class="modal fade" id="login_modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="myModalLabel">Login</h4>
      </div>
      <div class="modal-body">
        <div id="incorrect_login_message"></div>
        <form id="login_form" action="/login" method="POST">
            Email: 
            <input id="login_email" type="email"><br>
            Password: 
            <input id="login_password" type="password"><br>
        </form>

      </div>
      <div class="modal-footer">
        <button id="close_login_modal" type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary" id="submit_login_button">Login</button>
      </div>
    </div>
  </div>
</div>


<!-- Button for Logout -->
<!-- If the user is not logged in, the login button should be hidden-->

<button id="logout_button" type="button" class="btn btn-primary btn-lg"
{% if 'user_id' not in session %} style="display:none" {% endif %}>
  Logout
</button>


<!-- Javascript for Registration-->
<script src="/static/registration.js"></script>
<script src="/static/login.js"></script>


    {% block content %}BODY CONTENT GOES HERE{% endblock %}


    <!--Include link to bootstrap at the botom of html body-->
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous">
    </script>

    <footer>Copyright 2018</footer>
</body>
</html>