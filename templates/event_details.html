{% extends 'base.html' %}
{% block title %}EventDetails{% endblock %}

{%block content %}
<!--Event Details-->
<div class="event_details">

    <h1>
        Event Details
    </h1>
        <h2 id="name">
            {{ event_details['name'] }}
        </h2>

        <img class="logo" src="{{ event_details['logo'] }}">

        <p id="venue_name">
            Venue Name: {{ event_details['venue_name'] }}
        </p>

        <p id="address">
            Venue Address: {{ event_details['address'] }}
        </p>

        <p id="start_time">
            Start Time: {{ event_details['start_time'] }}
        </p>

        <p id="end_time">
            End Time: {{ event_details['end_time'] }}
        </p>

        <div id="eb_url">
            <a href="{{ event_details['eb_url'] }}">
                Browse Tickets on Evenbrite
            </a>
        </div>

</div>

<!--Hidden divs for passing data-->     

        <div id="longitude" hidden>
            Longitude: {{ event_details['longitude'] }}
        </div>
        <div id="latitude" hidden>
            Latitude: {{ event_details['latitude'] }}
        </div>
        <div id="start_time_tz" hidden>
            Start Time Tz: {{ event_details['start_time_tz'] }}
        </div><br>
        <div id="start_time_local" hidden>
            Start Time (Local): {{ event_details['start_time_local'] }}
        </div><br>
        <div id="end_time_tz" hidden>
            End Time Tz: {{ event_details['end_time_tz'] }}
        </div><br>
        <div id="end_time_tz" hidden>
            End Time (Local): {{ event_details['end_time_local'] }}
        </div>
        <div id="logo" hidden>
            {{ event_details['logo'] }}
        </div>
        
<!--If the user is in the session, display bookmarks and comments ability-->
        {% if "user_id" in session %}   

        <div class="bookmark">

            <h1>
                Bookmark Event
            </h1>

                <button class="bookmark" data-eventid="{{ event_id }}" data-status="going">
                    I'm Going!
                </button>

                <button class="bookmark" data-eventid="{{ event_id }}" data-status="interested">
                    Interested
                </button>
        </div>
       

        <div>

            <h1 class="comments">
                    Comments
            </h1>

                <form id="comment" action="/add_comment" data-eventid="{{ event_id }}" method="POST">
                    <p>
                        Leave a comment:
                    </p>
                    <textarea id="comment_text"></textarea><br>
                    <input type="submit">
                </form>

        </div>
        {% endif %}

<!--Displays list of comments-->
        <ul id="comment-list">

            {% for comment in comments %}
                <li>{{ comment.user.name}}: {{ comment.comment }}</li>
            {% endfor %}

        </ul>

<!--Show event description-->
    <p class="event_description">

        <h1>
            Event Description
        </h1>

        <p id="description">
            {{ event_details['description'] | safe }}
        </p>
        
    </p>

<!--Javascript needs to be in the body below all of the html that it calls on. Make sure to include jquery CDN also (in base html)-->

    <script src="/static/bookmark.js"></script>
    <script src="/static/comments.js"></script>

{% endblock %}