{% extends 'base.html' %}
{% block title %}EventDetails{% endblock %}

{%block content %}
<!--Link to profile icon stylesheet-->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

<!--Event Details-->
<div class="event_details">

    <h1>
        Event Details
    </h1>
        <h2 id="name">
            {{ event_details['name'] }}
        </h2>

        <img class="logo" src="{{ event_details['logo'] }}">

        <p id="venue_name">
            Venue Name: {{ event_details['venue_name'] }}
        </p>

        <p id="address">
            Venue Address: {{ event_details['address'] }}
        </p>

        <p id="start_time">
            Start Time: {{ event_details['start_time'] }}
        </p>

        <p id="end_time">
            End Time: {{ event_details['end_time'] }}
        </p>

        <div id="eb_url">
            <a href="{{ event_details['eb_url'] }}">
                Browse Tickets on Evenbrite
            </a>
        </div>

</div>


<!--Hidden divs for passing data-->     

        <div id="longitude" hidden>
            Longitude: {{ event_details['longitude'] }}
        </div>
        <div id="latitude" hidden>
            Latitude: {{ event_details['latitude'] }}
        </div>
        <div id="start_time_tz" hidden>
            Start Time Tz: {{ event_details['start_time_tz'] }}
        </div><br>
        <div id="start_time_local" hidden>
            Start Time (Local): {{ event_details['start_time_local'] }}
        </div><br>
        <div id="end_time_tz" hidden>
            End Time Tz: {{ event_details['end_time_tz'] }}
        </div><br>
        <div id="end_time_tz" hidden>
            End Time (Local): {{ event_details['end_time_local'] }}
        </div>
        <div id="logo" hidden>
            {{ event_details['logo'] }}
        </div>
        
<!--If the user is in the session, display bookmarks and comments ability, and other users going-->
{% if "user_id" in session %}   

    <!--Bookmark div-->
        <div>

            <h1>
                Bookmark Event
            </h1>

            <input class="bookmark" id="going_button" type="radio" name="bookmark" value="going" data-eventid="{{ event_id }}" data-status="going" style="background-color:blue"

            {% if bookmark and bookmark.bookmark_type_id == 1 %}
            checked 
            {% endif %}

            /> I'm Going!


            <input class="bookmark" id="interested_button" type="radio" name="bookmark" value="interested" data-eventid="{{ event_id }}" data-status="interested" style="background-color:blue"

             {% if bookmark and bookmark.bookmark_type_id == 2 %}
            checked 
            {% endif %}

            /> Interested 


        </div>
       
    <!--Comment div-->
        <div>

            <h1 class="comments">
                    Comments
            </h1>

                <form id="comment" action="/add_comment" data-eventid="{{ event_id }}" method="POST">
                    <p>
                        Leave a comment:
                    </p>
                    <textarea id="comment_text"></textarea><br>
                    <input type="submit">
                </form>

        </div>

    <!--Displays list of comments-->
        <ul id="comment-list">

            {% for comment in comments %}
                <li>{{ comment.user.name}}: {{ comment.comment }}</li>
            {% endfor %}

        </ul>


    <!--List of other users going to selected events-->

    {% if users_going %}   
    <div>
        <h1>
            Jam Users Going to {{ event_details['name'] }}
        </h1>
                {% for user in users_going %}
                    <div class="card">
                      <img src="http://www.personalbrandingblog.com/wp-content/uploads/2017/08/blank-profile-picture-973460_640-300x300.png" alt="John" style="width:100%">
                      <h1>{{ user.name }}</h1>
                      <p class="title">theJAM user</p>
                      <p>University of Florida</p>
                      <a href="#"><i class="fa fa-dribbble"></i></a> 
                      <a href="#"><i class="fa fa-twitter"></i></a> 
                      <a href="#"><i class="fa fa-linkedin"></i></a> 
                      <a href="#"><i class="fa fa-facebook"></i></a> 
                      <form action="/my_profile" method="get">
                        <input name="user_id" value="{{ user.user_id }}" hidden>
                        <input id="contact_card_button" type="submit" value="Profile/Contact">
                      </form>
                    </div><br>
                {% endfor %}
    </div>

    {% endif %}   

<!--Ends if about being logged into session-->

{% endif %}

<!--Show event description-->
    <p class="event_description">

        <h1>
            Event Description
        </h1>

        <p id="description">
            {{ event_details['description'] | safe }}
        </p>
        
    </p>

<!--Javascript needs to be in the body below all of the html that it calls on. Make sure to include jquery CDN also (in base html)-->

    <script src="/static/bookmark.js"></script>
    <script src="/static/comments.js"></script>

{% endblock %}