{% extends 'base.html' %}
{% block title %}Profile{% endblock %}

{% block content %}

<!-- Add icon library that has User Profile Img Card-->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

<div class="profile_card">
  <img src="http://www.personalbrandingblog.com/wp-content/uploads/2017/08/blank-profile-picture-973460_640-300x300.png" alt="John" style="width:100%">
  <h1>{{ user.name }}</h1>
  <p class="title">theJAM user</p>
  <p>University of Florida</p>
  <a href="#"><i class="fa fa-dribbble"></i></a> 
  <a href="#"><i class="fa fa-twitter"></i></a> 
  <a href="#"><i class="fa fa-linkedin"></i></a> 
  <a href="#"><i class="fa fa-facebook"></i></a>
  <!-- Button to the trigger modal -->
  <!-- Button should only show if your on another user's profile -->
  {% if user.user_id != session["user_id"] %}
  <p>
    <button type="button" class="btn btn-primary btn-lg" data-toggle="modal" data-target="#emailModal">
          Email {{ user.name }}
    </button>
  </p>
  {% endif %}
</div>


<!--Email the user: This is the modal window!-->
<!-- Modal -->
<div class="modal fade" id="emailModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="myModalLabel">Email {{ user.name }}</h4>
      </div>
      <div class="modal-body">
         <form action="/email" method="post">
            Subject:<br>
            <input type="text" id="subject"><br>
            Body:<br>
            <textarea id="email_body" size="50"></textarea><br><br>
            <!--We are on the profile of the user we want to send the email to-->
            <input id="send_to" value="{{ user.email }}" hidden>
        </form>

      </div>
      <div class="modal-footer">
        <button type="button" id="close_registration_modal" class="btn btn-default" data-dismiss="modal">Close</button>
        <button type="button" id="email_user_button" class="btn btn-primary">Send Email</button>
      </div>
    </div>
  </div>
</div>


<!--List of events user is going to-->
<ul>
    <h3>Events You Are Going To</h3>
    {% for event in events_going %}
        <li>{{ event.name }}</li>
        <ul>
            <li>{{ event.start_time }}</li>
            <li>{{ event.end_time }}</li>
            <li>{{ event.venue_name }}</li>
            <li>{{ event.address }}</li>
            <li><img class="logo" src="{{ event.logo }}"></li>
            <li><a href="/event_details?event_id={{ event.event_id }}">Event Details</a></li>
            <li><a href="{{ event.eb_url }}">Buy Tickets on Eventbrite</a><li>
        </ul>

    {% endfor %}
</ul>

<!--List of events user is interested in-->
<ul>
    <h3>Events You Are Interested In</h3>
    {% for event in events_interested %}
        <li>{{ event.name }}</li>
        <ul>
            <li>{{ event.start_time }}</li>
            <li>{{ event.end_time }}</li>
            <li>{{ event.address }}</li>
             <li><img class="logo" src="{{ event.logo }}"></li>
            <li><a href="/event_details?event_id={{ event.event_id }}">Event Details</a></li>
            <li><a href="{{ event.eb_url }}">Buy Tickets on Eventbrite</a><li>
        </ul>

    {% endfor %}
</ul>

<script src="/static/email.js"></script>

{% endblock %}